---
interface Props {
  tag: string;
}

const { tag } = Astro.props;

// Color palette designed for dark backgrounds
const colors = [
  { bg: 'rgba(99, 102, 241, 0.2)', text: '#a5b4fc', border: 'rgba(99, 102, 241, 0.4)' }, // Indigo
  { bg: 'rgba(236, 72, 153, 0.2)', text: '#f9a8d4', border: 'rgba(236, 72, 153, 0.4)' }, // Pink
  { bg: 'rgba(34, 197, 94, 0.2)', text: '#86efac', border: 'rgba(34, 197, 94, 0.4)' }, // Green
  { bg: 'rgba(249, 115, 22, 0.2)', text: '#fdba74', border: 'rgba(249, 115, 22, 0.4)' }, // Orange
  { bg: 'rgba(14, 165, 233, 0.2)', text: '#7dd3fc', border: 'rgba(14, 165, 233, 0.4)' }, // Sky
  { bg: 'rgba(168, 85, 247, 0.2)', text: '#d8b4fe', border: 'rgba(168, 85, 247, 0.4)' }, // Purple
  { bg: 'rgba(234, 179, 8, 0.2)', text: '#fde047', border: 'rgba(234, 179, 8, 0.4)' }, // Yellow
  { bg: 'rgba(20, 184, 166, 0.2)', text: '#5eead4', border: 'rgba(20, 184, 166, 0.4)' }, // Teal
];

// Simple hash function to consistently assign colors to tags
function hashString(str: string): number {
  let hash = 0;
  for (let i = 0; i < str.length; i++) {
    hash = (hash << 5) - hash + str.charCodeAt(i);
    hash = hash & hash;
  }
  return Math.abs(hash);
}

const colorIndex = hashString(tag) % colors.length;
const color = colors[colorIndex];
---

<span
  class="tag"
  style={`background-color: ${color.bg}; color: ${color.text}; border-color: ${color.border};`}
>
  {tag}
</span>

<style>
  .tag {
    display: inline-block;
    padding: 0.2em 0.6em;
    font-size: 0.75em;
    font-weight: 500;
    border-radius: 9999px;
    border: 1px solid;
    text-transform: lowercase;
    letter-spacing: 0.02em;
  }
</style>
